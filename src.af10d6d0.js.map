{"version":3,"sources":["index.js"],"names":["galleryItems","preview","original","description","refs","gallery","document","querySelector","modal","modalImg","activeIndex","imgCardsMarkup","createImgGalleryMarkup","map","galleryItem","onGalleryClick","event","preventDefault","target","nodeName","forEach","element","index","includes","src","console","log","window","addEventListener","keyboardManipulation","classList","add","dataset","source","closeModal","remove","alt","removeEventListener","e","key","length","alert","insertAdjacentHTML","join"],"mappings":";;;AAkLC,aAlLD,QAAA,oBAEA,MAAMA,EAAe,CACnB,CACEC,QACE,uFACFC,SACE,uFACFC,YAAa,mBAEf,CACEF,QACE,4EACFC,SACE,4EACFC,YAAa,6BAEf,CACEF,QACE,wEACFC,SACE,wEACFC,YAAa,qBAEf,CACEF,QACE,0EACFC,SACE,0EACFC,YAAa,iBAEf,CACEF,QACE,4EACFC,SACE,4EACFC,YAAa,oBAEf,CACEF,QACE,4EACFC,SACE,4EACFC,YAAa,yBAEf,CACEF,QACE,2EACFC,SACE,2EACFC,YAAa,yBAEf,CACEF,QACE,4EACFC,SACE,4EACFC,YAAa,oBAEf,CACEF,QACE,6EACFC,SACE,6EACFC,YAAa,yBAIXC,EAAO,CACXC,QAASC,SAASC,cAAc,eAChCC,MAAOF,SAASC,cAAc,gBAC9BE,SAAUH,SAASC,cAAc,qBAGnC,IAAIG,EAAc,KAUlB,MAAMC,EAAiBC,EAAuBZ,GAM9C,SAASY,EAAuBZ,GACvBA,OAAAA,EAAaa,IAAKC,2HAICA,EAAYZ,4HAIbY,EAAYb,8CACJa,EAAYZ,uCACpBY,EAAYX,iFAavC,SAASY,EAAeC,GACtBA,EAAMC,iBACwB,QAA1BD,EAAME,OAAOC,WAGjBR,EAAeS,QAAQ,CAACC,EAASC,KAC3BD,EAAQE,SAASP,EAAME,OAAOM,OAChCd,EAAcY,KAGlBG,QAAQC,IAAIhB,GACZiB,OAAOC,iBAAiB,UAAWC,GACnCzB,EAAKI,MAAMsB,UAAUC,IAAI,WACzB3B,EAAKK,SAASe,IAAMR,EAAME,OAAOc,QAAQC,QAU3C,SAASC,IACP9B,EAAKI,MAAMsB,UAAUK,OAAO,WAC5B/B,EAAKK,SAASe,IAAM,GACpBpB,EAAKK,SAAS2B,IAAM,GACpBT,OAAOU,oBAAoB,QAASR,GAatC,SAASA,EAAqBS,GACpBA,OAAAA,EAAEC,KACH7B,KAAAA,EAAcV,EAAawC,OAAS,GAAK,aAC5C9B,GAAe,EACfN,EAAKK,SAASe,IAAMxB,EAAaU,GAAaR,SAC9C,MACGQ,KAAAA,EAAc,GAAK,YACtBA,GAAe,EACfN,EAAKK,SAASe,IAAMxB,EAAaU,GAAaR,SAC9C,MACGQ,KAAgB,IAAhBA,GAAqB,YACxBA,EAAcV,EAAawC,OAAS,EACpCpC,EAAKK,SAASe,IAAMxB,EAAaU,GAAaR,SAC9C,MACGQ,KAAAA,IAAgBV,EAAawC,OAAS,GAAK,aAC9C9B,EAAc,EACdN,EAAKK,SAASe,IAAMxB,EAAaU,GAAaR,SAC9C,MACG,IAAA,SACHgC,IACA,MACF,QACEO,MAAM,wBA1FZrC,EAAKC,QAAQqC,mBAAmB,YAAa/B,EAAegC,KAAK,KAwBjEvC,EAAKC,QAAQuB,iBAAiB,QAASb,GAkCvCX,EAAKI,MAAMoB,iBAAiB,QAASM","file":"src.af10d6d0.js","sourceRoot":"../src","sourcesContent":["import './sass/main.scss';\n\nconst galleryItems = [\n  {\n    preview:\n      'https://cdn.pixabay.com/photo/2019/05/14/16/43/himilayan-blue-poppy-4202825__340.jpg',\n    original:\n      'https://cdn.pixabay.com/photo/2019/05/14/16/43/himilayan-blue-poppy-4202825_1280.jpg',\n    description: 'Hokkaido Flower',\n  },\n  {\n    preview:\n      'https://cdn.pixabay.com/photo/2019/05/14/22/05/container-4203677__340.jpg',\n    original:\n      'https://cdn.pixabay.com/photo/2019/05/14/22/05/container-4203677_1280.jpg',\n    description: 'Container Haulage Freight',\n  },\n  {\n    preview:\n      'https://cdn.pixabay.com/photo/2019/05/16/09/47/beach-4206785__340.jpg',\n    original:\n      'https://cdn.pixabay.com/photo/2019/05/16/09/47/beach-4206785_1280.jpg',\n    description: 'Aerial Beach View',\n  },\n  {\n    preview:\n      'https://cdn.pixabay.com/photo/2016/11/18/16/19/flowers-1835619__340.jpg',\n    original:\n      'https://cdn.pixabay.com/photo/2016/11/18/16/19/flowers-1835619_1280.jpg',\n    description: 'Flower Blooms',\n  },\n  {\n    preview:\n      'https://cdn.pixabay.com/photo/2018/09/13/10/36/mountains-3674334__340.jpg',\n    original:\n      'https://cdn.pixabay.com/photo/2018/09/13/10/36/mountains-3674334_1280.jpg',\n    description: 'Alpine Mountains',\n  },\n  {\n    preview:\n      'https://cdn.pixabay.com/photo/2019/05/16/23/04/landscape-4208571__340.jpg',\n    original:\n      'https://cdn.pixabay.com/photo/2019/05/16/23/04/landscape-4208571_1280.jpg',\n    description: 'Mountain Lake Sailing',\n  },\n  {\n    preview:\n      'https://cdn.pixabay.com/photo/2019/05/17/09/27/the-alps-4209272__340.jpg',\n    original:\n      'https://cdn.pixabay.com/photo/2019/05/17/09/27/the-alps-4209272_1280.jpg',\n    description: 'Alpine Spring Meadows',\n  },\n  {\n    preview:\n      'https://cdn.pixabay.com/photo/2019/05/16/21/10/landscape-4208255__340.jpg',\n    original:\n      'https://cdn.pixabay.com/photo/2019/05/16/21/10/landscape-4208255_1280.jpg',\n    description: 'Nature Landscape',\n  },\n  {\n    preview:\n      'https://cdn.pixabay.com/photo/2019/05/17/04/35/lighthouse-4208843__340.jpg',\n    original:\n      'https://cdn.pixabay.com/photo/2019/05/17/04/35/lighthouse-4208843_1280.jpg',\n    description: 'Lighthouse Coast Sea',\n  },\n];\n\nconst refs = {\n  gallery: document.querySelector(\".js-gallery\"),\n  modal: document.querySelector(\".js-lightbox\"),\n  modalImg: document.querySelector(\".lightbox__image\"),\n};\n\nlet activeIndex = null;\n\n// ======================== Step 1 - converting incoming data into Markup ==============================\n\n// //получаю доступ к родителю галереи:\n\n// const gallery = document.querySelector(\".js-gallery\");\n\n// переменная для функции создающей разметку:\n\nconst imgCardsMarkup = createImgGalleryMarkup(galleryItems);\n\nrefs.gallery.insertAdjacentHTML(\"beforeend\", imgCardsMarkup.join(\"\"));\n\n// функция, которая преображает входящий массив объектов в разметку:\n\nfunction createImgGalleryMarkup(galleryItems) {\n  return galleryItems.map((galleryItem) => {\n    return `<li class=\"gallery__item\">\n                <a\n                    class=\"gallery__link\"\n                    href=\"${galleryItem.original}\"\n                >\n                <img\n                    class=\"gallery__image\"\n                    src=\"${galleryItem.preview}\"\n                    data-source=\"${galleryItem.original}\"\n                    alt=\"${galleryItem.description}\"\n                    />\n                </a>\n            </li>`;\n  });\n}\n\n// ================================ Step 2 - open && close modal =======================================================\n\nrefs.gallery.addEventListener(\"click\", onGalleryClick);\n\n// proverka\n\nfunction onGalleryClick(event) {\n  event.preventDefault();\n  if (event.target.nodeName !== \"IMG\") {\n    return;\n  }\n  imgCardsMarkup.forEach((element, index) => {\n    if (element.includes(event.target.src)) {\n      activeIndex = index;\n    }\n  });\n  console.log(activeIndex);\n  window.addEventListener(\"keydown\", keyboardManipulation);\n  refs.modal.classList.add(\"is-open\");\n  refs.modalImg.src = event.target.dataset.source;\n}\n\n// function closeModal(event) {\n//   if (event.target.nodeName === \"IMG\") {\n//     return;\n//   }\n//   refs.modal.classList.remove(\"is-open\");\n//   refs.modalImg.src = \"#\";\n// }\nfunction closeModal() {\n  refs.modal.classList.remove(\"is-open\");\n  refs.modalImg.src = \"\";\n  refs.modalImg.alt = \"\";\n  window.removeEventListener(\"keyup\", keyboardManipulation);\n}\n\nrefs.modal.addEventListener(\"click\", closeModal);\n// window.addEventListener(\"keydown\", (event) => {\n//   if (event.key === \"Escape\") {\n//     closeModal(event);\n//   }\n//   return;\n// });\n\n// ================================ Step 3 - switch with arrows =======================================================//\n\nfunction keyboardManipulation(e) {\n  switch (e.key) {\n    case activeIndex < galleryItems.length - 1 && \"ArrowRight\":\n      activeIndex += 1;\n      refs.modalImg.src = galleryItems[activeIndex].original;\n      break;\n    case activeIndex > 0 && \"ArrowLeft\":\n      activeIndex -= 1;\n      refs.modalImg.src = galleryItems[activeIndex].original;\n      break;\n    case activeIndex === 0 && \"ArrowLeft\":\n      activeIndex = galleryItems.length - 1;\n      refs.modalImg.src = galleryItems[activeIndex].original;\n      break;\n    case activeIndex === galleryItems.length - 1 && \"ArrowRight\":\n      activeIndex = 0;\n      refs.modalImg.src = galleryItems[activeIndex].original;\n      break;\n    case \"Escape\":\n      closeModal();\n      break;\n    default:\n      alert(\"что-то пошло не так\");\n  }\n}\n"]}